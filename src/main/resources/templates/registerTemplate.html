<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link href="../static/CreateEventPage.css" th:href="@{CreateEventPage.css}" rel="stylesheet">

    <style>
        #registerForm > *{
            display:block;
        }
    </style>
</head>
<body>

<!-- Thymeleaf fragments. Dynamically copies HTML contained another template file
Syntax of th:replace value is "name_of_template_file :: value_of_html_element_with_th:fragment_as_an_attribute"
Go to baseTemplate.html and find the <header> element with the attribute th:fragment="header"
-->
<main>
    <!-- If the model has an attribute named 'errors' (see RegController.java)
        Then paragraph elements detailing the errors will be shown
    -->
    <header>
        <img src="../static/hodgelogo.JFIF" th:src="@{hodgelogo.JFIF}">
    </header>

    <p th:if="${errors} != null" th:text="ERROR"></p>
    <p th:each="err : ${errors}" th:text="${err}"></p>

    <form id="registerForm" action="/registration" method="post" th:object="${user}">
        <!-- th:object allows the user object to be referenced in sub-elements (see username input below)
            Assuming that it is passed through as an attribute to the model
            Access user object attributes using *{NAME_OF_ATTRIBUTE} syntax (rather than ${user.NAME_OF_ATTRIBUTE})
        -->
        <label for="un">Username:</label>
        <input id="un" name="username" type="text" th:field="*{username}"/>
        <!-- thfield: username is an attribute of the user object stored in the model.
             This allows the value of the username to remain in the form across page reloads (e.g., due to validation errors)
             The same can be achieved by using th:field="${user.username}"
             -->
        <label for="pw">Password:</label>
        <input id="pw" name="password" type="password"/>
        <label for="cpw">Confirm Password:</label>
        <input id="cpw" name="cpassword" type="password"/>

        <!--
        Required to protect against CSRF attacks.
        See: https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)
        See: https://www.baeldung.com/spring-security-csrf
        See: https://www.baeldung.com/csrf-thymeleaf-with-spring-security
        -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <input id="sub" type="submit"/>
    </form>
</main>

</body>
</html>